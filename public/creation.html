<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Mes Cr√©ations</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Pacifico', cursive;
      background-image: url('fond-creation.jpg');
      background-size: cover;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: #fff;
    }

    .btn-retour {
      background-color: #ffb6c1;
      border: none;
      padding: 10px 15px;
      border-radius: 8px;
      cursor: pointer;
      font-family: 'Pacifico', cursive;
    }

    form {
      text-align: center;
      margin-bottom: 20px;
    }

    input[type="text"] {
      width: 90%;
      padding: 10px;
      border-radius: 10px;
      border: none;
      margin: 10px 0;
    }

    input[type="file"] {
      margin: 10px 0;
    }

    button[type="submit"] {
      background-color: violet;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 1em;
      border-radius: 10px;
      cursor: pointer;
    }

    .creations-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }

    .creation-item {
      width: 45%;
      background-color: rgba(255, 240, 250, 0.95);
      border-radius: 15px;
      padding: 10px;
      position: relative;
      box-shadow: 2px 2px 6px rgba(0,0,0,0.2);
    }

    .creation-item img {
      width: 100%;
      border-radius: 10px;
      cursor: pointer;
    }

    .creation-item p {
      margin: 5px 0;
      word-break: break-word;
    }

    .delete-btn {
      position: absolute;
      top: 5px;
      right: 10px;
      background-color: transparent;
      border: none;
      font-size: 20px;
      cursor: pointer;
      color: #ff69b4;
    }

    @media (max-width: 768px) {
      .creation-item {
        width: 90%;
      }
    }
  </style>
</head>
<body>
  <button class="btn-retour" onclick="window.location.href='index.html'">‚Üê Retour</button>
  <h1>Mes Cr√©ations</h1>

  <form id="creationForm">
    <input type="text" id="creationTitle" placeholder="Titre ou l√©gende (facultatif)" /><br />
    <input type="file" id="creationFiles" multiple /><br />
    <button type="submit">Enregistrer</button>
  </form>

  <div class="creations-grid" id="creationsList"></div>

  <script>
    const form = document.getElementById('creationForm');
    const creationsList = document.getElementById('creationsList');
    let creations = JSON.parse(localStorage.getItem('creations')) || [];

    function saveCreations() {
      localStorage.setItem('creations', JSON.stringify(creations));
      renderCreations();
    }

    function renderCreations() {
      creationsList.innerHTML = '';
      creations.forEach((item, index) => {
        const div = document.createElement('div');
        div.className = 'creation-item';
        if (item.title) div.innerHTML += `<p><strong>${item.title}</strong></p>`;
        if (item.files && item.files.length) {
          item.files.forEach(src => {
            const isImage = src.startsWith('data:image');
            if (isImage) {
              const img = document.createElement('img');
              img.src = src;
              img.onclick = () => window.open(src, '_blank');
              div.appendChild(img);
            } else {
              div.innerHTML += `<p><a href="${src}" target="_blank">üìÅ Voir le fichier</a></p>`;
            }
          });
        }

        const delBtn = document.createElement('button');
        delBtn.className = 'delete-btn';
        delBtn.innerHTML = '‚úñ';
        delBtn.onclick = () => {
          creations.splice(index, 1);
          saveCreations();
        };
        div.appendChild(delBtn);
        creationsList.appendChild(div);
      });
    }

    form.onsubmit = (e) => {
      e.preventDefault();
      const title = document.getElementById('creationTitle').value;
      const files = document.getElementById('creationFiles').files;
      const fileData = [];

      if (files.length === 0) {
        creations.push({ title, files: [] });
        saveCreations();
        form.reset();
        return;
      }

      let loaded = 0;
      for (let file of files) {
        const reader = new FileReader();
        reader.onload = () => {
          fileData.push(reader.result);
          loaded++;
          if (loaded === files.length) {
            creations.push({ title, files: fileData });
            saveCreations();
            form.reset();
          }
        };
        reader.readAsDataURL(file);
      }
    };

    renderCreations();
  </script>
</body>
</html>
